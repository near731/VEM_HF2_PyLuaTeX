%Preamble
\documentclass[12pt,a4paper]{article}
\usepackage[top=20mm, bottom=20mm, left=20mm, right=20mm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr} \setlength{\headheight}{15pt}
\usepackage{lastpage}
\usepackage[magyar]{babel}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{empheq}
\usepackage{enumitem}
\usepackage{float}
\usepackage{verbatim}
\usepackage{hyperref}
\usepackage{multicol}
\usepackage{blkarray}
\usepackage[most]{tcolorbox}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{picture}
\usepackage{graphicx}
\usepackage{makecell}
\usepackage{eso-pic}
\usepackage[executable=python3.10.exe]{pyluatex}

\pagestyle{fancy}
\def\mx#1{\mathbf{#1}}
\def\vec#1{\underline{\mathbf{#1}}}
\def\m{\; \left[\mathrm{m}\right]}
\def\mili{\; \left[\mathrm{mm}\right]}
\def\mm{\; \left[\mathrm{m^2}\right]}
\def\mmmm{\; \left[\mathrm{m^4}\right]}
\def\i{\left(i\right)}
\def\ui#1{\left(#1\right)}
\def\SI{\; \left[\mathrm{SI}\right]}
\def\Nm{\; \left[\mathrm{Nm}\right]}
\def\N{\; \left[\mathrm{N}\right]}
\def\kN{\; \left[\mathrm{kN}\right]}
\def\futyi{\cdot 10^{9}}
\def\fos{\; \left[-\right]}
\def\Gpa{\; \left[\mathrm{GPa}\right]}
\def\rads{\; \left[\mathrm{\frac{rad}{s}}\right]}
\def\Hz{\; \left[\mathrm{Hz}\right]}
\def\kg{\; \left[\mathrm{kg}\right]}
\def\kgpm{\; \left[\mathrm{\frac{kg}{\; m^3}}\right]}

\lhead{BMEGEMMBXVE, VEM alapjai 2.HF}
\cfoot{\thepage\ / \pageref{LastPage}}
\rhead{Németh Áron Imre, D1J5ZG}

\begin{python}
    import sympy as sp
    from sympy.printing.latex import LatexPrinter, print_latex
    from sympy import latex
    from calc.vem_hf2_calc import calculate
    from calc.var_print import printer, print_matrix, prin_TeX, my_latex

    V=calculate()
\end{python}

\begin{document}

\section{A szerkezet méretarányos ábrájának elkészítése}
\subsubsection*{Adatok:}

\begin{multicols}{2}
    \begin{itemize}
        \item $a=\pyc{prin_TeX(V["a"],1)}\m$
        \item $b=\pyc{prin_TeX(V["b"])}\m$
        \item $d=\pyc{prin_TeX(V["d_mm"])}\mili$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $E=\pyc{prin_TeX(V["E_GPa"])} \Gpa$
        \item $m_0=\pyc{prin_TeX(V["m_0"])} \kg$
        \item $\rho=\pyc{prin_TeX(V["rho"])} \kgpm $
    \end{itemize}
\end{multicols}

\subsection{A szerkezet léptékhelyes ábrája}
A szerkezet méretarányos ábrája esetünkben az alábbi módon néz ki:

\subsection{A szerkezet végeselem modelljének ábrája}
Az alábbi ábrán látható a szerkezet VEM modellje:

\section{Két BEAM elem használata}
A VEM modell két \textbf{BEAM} elemből áll, egyik elem az \textbf{AB} szakaszon,
míg a második elem a \textbf{BC} szakaszon helyezkedik el. A számítások során
a koncenrált tömeget \textit{elhanyagoljuk}, valamint \textit{konzisztens} tömegmátrixot
használunk.
\subsection{Csomópontok, elemek definiálása}
\subsubsection{Csomópontok definiálása}
Az alábbi táblázatban láthatóak a különböző csomópontok $x$ illetve
$y$ koordinátái:
\begin{center}
    \begin{tabular}{|c|c|c|}
        \hline
        Csomópont & x koordináta & y koordináta \\
        \hline
        \hline
        1         & 0            & $0$          \\
        \hline
        2         & $b$          & $0$          \\
        \hline
        3         & $a+b$        & $0$          \\
        \hline
    \end{tabular}
\end{center}

\subsubsection{Elemek hozzárendelése a csomó pontokhoz}
Az alábbi táblázat tartalmazza a csomópont-elem hozzárendeléseket:
\begin{center}
    \begin{tabular}{|c|c|c|}
        \hline
        Elemszám & Lokális 1. csomópont & Lokális 2. csomópont \\
        \hline
        \hline
        1        & 1                    & 2                    \\
        \hline
        2        & 2                    & 3                    \\
        \hline
    \end{tabular}
\end{center}

\subsection{Elemek tulajdonságainak meghatározása}
\subsubsection{Az elemek hosszainak meghatározása}
A rúdak hosszait az alábbi általános képlet segítségével tudjuk
könnyen kiszámítani:
\begin{tcolorbox}[ams equation]\label{eq:L_i}
    L^{\left(i\right)}=\sqrt{\left(x^{\left(i\right)}_2-x^{\left(i\right)}_1\right)^2+
        \left(y^{\left(i\right)}_2-y^{\left(i\right)}_1\right)^2}
\end{tcolorbox}
\noindent Ezen képletet alkalmazva a rúdak hosszai numerikusan az alábbiak:
\begin{multicols}{2}
    \begin{itemize}
        \item $L_1^{\ui{a}}=\pyc{prin_TeX(V["L_1_a"])} \m$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $L_2^{\ui{a}}=\pyc{prin_TeX(V["L_2_a"])} \m$
    \end{itemize}
\end{multicols}

\subsubsection{Az elemek keresztmetszeteinek tulajdonságainak meghatározása}
Mivel mindegyik elemünk kör keresztmetszetű, így az alábbi összefüggésekkel számíthatjuk ki a keresztmetszetek területét
és másodrendű nyomatékait:
\begin{tcolorbox}[ams equation]
    A^{\i}=\frac{\left(d^{\i}\right)^2  \pi}{4} \hspace{40mm}
    I_z^{\i}=\frac{\left(d^{\i}\right)^4  \pi}{64}
\end{tcolorbox}
\noindent Mivel az elemk keresztmetszeteinek átmérője azonos,
ezért az elemek keresztmetszeteinek területei valamint másodrendű nyomatékai
megegyeznek. Tehát a keresztmetszetek területei és másodrendű nyomatékai numerikusan:
\begin{multicols}{2}
    \begin{itemize}
        \item $A_1^{\ui{a}}=A_2^{\ui{a}}=\pyc{prin_TeX(V["A"]*10**4,3)} \cdot 10^{-4}\mm$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item ${I_z}_1^{\ui{a}}={I_z}_2^{\ui{a}}=\pyc{prin_TeX(V["Iz"]*10**8,3)} \cdot 10^{-8} \mmmm$
    \end{itemize}
\end{multicols}
\subsection{Az elemi merevségi mátrixok meghatározása}
Most hogy már ismerjük a keresztmetszetek területét, másodrendű nyomatékait valamint rugalmassági modulusait, az alábbi
\textbf{BEAM} gerendaelemre vonatkozó összefüggéssel meghatározhatjuk a különböző elemek merevségi mátrixait:
\begin{tcolorbox}[ams equation]
    \mx{K}^{\i}=\frac{{I_z}_i E_i}{{L_i}^3}
    \begin{bmatrix}
        12    & 6 L_i        & -12    & 6 L_i        \\
        6 L_i & \; 4 {L_i}^2 & -6 L_i & \; 2 {L_i}^2 \\
        -12   & -6 L_i       & \; 12  & -6 L_i       \\
        6 L_i & \; 2 {L_i}^2 & -6 L_i & \; 4 {L_i}^2
    \end{bmatrix}
\end{tcolorbox}
\subsubsection*{Így az elemi merevségi mátrixok numerikusan:}
\begin{align*}
    \mx{K}_1^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["K_1_a"],1e-6,1,2)}
    \end{bmatrix} \SI \\[2mm]
    \mx{K}_2^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["K_2_a"],1e-6,1,2)}
    \end{bmatrix} \SI
\end{align*}
\subsection{Globális merevségi mátrix meghatározása}
Esetünkben három csomópontunk van, valamint mindegyik 2-2 szabadságfokkal rendelkezik,
így összesen 6 szabadsági fokunk van.
Rendeljünk hozzá a szabadságfokokat mindegyik rúdelemünkhöz, az alábbi mátrixba rendezve:
\begin{equation*}
    \mx{DoF}^{\ui{a}}=
    \begin{blockarray}{ccccc}
        {v_1}^{\i} & {{\vartheta}_1}^{\i} & {v_2}^{\i} & {{\vartheta}_2}^{\i} \\
        \begin{block}{[cccc]c}
            1 & 2 & 3 & 4 & \left(\mathbf{1}\right) \\
            3 & 4 & 5 & 6 & \left(\mathbf{2}\right) \\
        \end{block}
    \end{blockarray}
\end{equation*}
\noindent
A globális merevségi mátrixot úgy kell elő állítanunk, hogy
az adott elemhez tartozó merevségi mátrix elemeit a megfelelő szabadsági
fokhoz tartozó helyhez rendeljük hozzá. Ezután az alábbi numerikus eredményt kapjuk:
\begin{equation*}
    \mx{K}^{\ui{a}}=
    \begin{bmatrix}
        \pyc{print_matrix(V["K_glob_a"],1e-6,1,2)}
    \end{bmatrix} \SI
\end{equation*}
\subsection{Az elemi tömegmátrixok meghatározása}
Az elemek tömegmátrixait az alábbi módon tudjuk meghatározni \textit{konzisztens} tömegmátrix alkalmazása
mellett kétcsomópontos síkbeli rúdelem esetén:
\begin{tcolorbox}[ams equation]
    \mx{M}_m^{\i}=\frac{\rho A_i L_i}{420}
    \begin{bmatrix}
        156     & 22 L_i   & 54        & -13 L_i    \\
        22 L_i  & 4 L_i^2  & \; 13 L_i & -3 L_i^2   \\
        54      & 13 L_i   & 156       & -22 L_i    \\
        -13 L_i & -3 L_i^2 & -22 L_i   & \; 4 L_i^2
    \end{bmatrix}
\end{tcolorbox}
\subsubsection*{Így az elemi tömegmátrixok numerikusan:}
\begin{align*}
    \mx{M}_1^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["M_1_a"],1e-6,1,2)}
    \end{bmatrix} \SI \\[2mm]
    \mx{M}_2^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["M_2_a"],1e-6,1,2)}
    \end{bmatrix} \SI
\end{align*}
\subsection{Globális tömegmátrix meghatározása}
A globális tömegmátrixot úgy kell meghatároznunk, ahogy a globális merevségi mátrixot is,
tehát az adott elemhez tartozó tömegmátrix elemeit a megfelelő szabadsági
fokhoz tartozó helyhez rendeljük hozzá. Ezután az alábbi numerikus eredményt kapjuk:
\begin{equation*}
    \mx{M}^{\ui{a}}=
    \begin{bmatrix}
        \pyc{print_matrix(V["M_a"],1e-6,1,2)}
    \end{bmatrix} \SI
\end{equation*}
\subsection{Hajlító sajátfrekvenciák meghatározása}
Írjuk fel a diszkretizált mozgásegyenletet:
\begin{tcolorbox}[ams equation]
    \mx{M}^{\i} \ddot{\vec{U}}+\mx{K}^{\i} \vec{U}=0
\end{tcolorbox}
\noindent A mozgásegyenlet segítségével feltudjuk írni a frekvencia egyenletet, amely segítségével
kitudjuk számítani a hajlító sajátfrekvenciákat.
A frekvencia egyenlet alakja az alábbi:
\begin{tcolorbox}[ams equation]
    \det \left(\mx{K}^{\i}-\alpha^2 \mx{M}^{\i}\right)=0
\end{tcolorbox}
\subsubsection{A frekvencia egyenlet kondenzálása}
Ahhoz, hogy kitudjuk számítani a hajlító sajátfrekvenciákat kondenzáljuk a frekvencia egyenletet!
A kondenzáláskor a kötött szabadsági fokokhoz, tehát a zérus értékű elmozduláskomponensekhez tartozó sorokat és oszlopokat kell törölnünk a merevségi és tömeg mátrixból.
\subsubsection*{A globális elmozdulásvektor:}
\begin{equation*}
    \vec{U}^{\ui{a}}=
    \begin{bmatrix}
        0 & 0 & v_2 & \vartheta_2 & 0 & \vartheta_3
    \end{bmatrix}^{\mathrm{T}} \SI
\end{equation*}

\noindent A globális elmozdulásvektor alapján az alábbi kondenzált mennyiségek adódnak:
\begin{align*}
    \mx{\hat{K}}^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["K_kond_a"],1e-6,1,2)}
    \end{bmatrix} \SI \\[2mm]
    \mx{\hat{M}}^{\ui{a}} & =
    \begin{bmatrix}
        \pyc{print_matrix(V["M_kond_a"],1e-6,1,2)}
    \end{bmatrix} \SI
\end{align*}
\subsubsection{A hajlító sajátkörfrekvenciák meghatározása}
Most már feltudjuk írni a kondenzált frekvencia egyenlet:
\begin{tcolorbox}[ams equation]
    \det \left(\mx{\hat{K}}^{\i}-\alpha^2 \mx{\hat{M}}^{\i}\right)=0
\end{tcolorbox}
\noindent Az egyenletet megoldva az első három $\alpha$-ra az alábbi numerikus értékeket kapjuk:
\begin{multicols}{3}
    \begin{itemize}
        \item $\alpha_1^{\ui{a}}=\pyc{prin_TeX(V["α_1_a"],3)} \rads$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $\alpha_2^{\ui{a}}=\pyc{prin_TeX(V["α_2_a"],3)} \rads$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $\alpha_1^{\ui{a}}=\pyc{prin_TeX(V["α_3_a"],3)} \rads$
    \end{itemize}
\end{multicols}
\subsubsection{A hajlító sajátfrekvenciák numerikus kiszámítása}
A hajlító sajátfrekvenciákból az alábbi egyszerű összefüggéssel tudjuk kiszámolni a sajátfrekvenciákat:
\begin{tcolorbox}[ams equation]
    f_i=\frac{\alpha_i}{2 \pi}
\end{tcolorbox}
\noindent Így az alábbi sajátfrekvencia értékeket kapjuk:
\begin{multicols}{3}
    \begin{itemize}
        \item $f_1^{\ui{a}}=\pyc{prin_TeX(V["f_1_a"],3)} \Hz$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $f_2^{\ui{a}}=\pyc{prin_TeX(V["f_2_a"],3)} \Hz$
    \end{itemize}
    \columnbreak
    \begin{itemize}
        \item $f_1^{\ui{a}}=\pyc{prin_TeX(V["f_3_a"],3)} \Hz$
    \end{itemize}
\end{multicols}

\newpage
\tableofcontents
\subsection*{Felhasznált szoftverek:}
\begin{itemize}
    \item Lua\LaTeX \hspace{0.4mm} szövegszerkesztő: VS Code
    \item Ábrák rajzolása: Adobe Illustrator
    \item Számítások elvégzése: JuPyter Notebook
    \item Eredmények ellenőrzése: SIKEREZ
\end{itemize}
\end{document}